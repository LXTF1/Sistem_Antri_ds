<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Petugas - Sistem Antrian</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body>
    <div id="login-container" class="login-container">
        <div class="login-box">
            <img src="assets/logo.png" alt="Logo" class="login-logo">
            <h2>Login Petugas</h2>
            <div class="input-group">
                <label for="username">Username</label>
                <input type="text" id="username" placeholder="Masukkan username">
            </div>
            <div class="input-group">
                <label for="password">Password</label>
                <input type="password" id="password" placeholder="Masukkan password">
            </div>
            <button id="login-btn">Login</button>
            <div id="login-error" class="error-message"></div>
        </div>
    </div>

    <div id="admin-panel" class="admin-panel hidden">
        <header>
            <div class="logo-container">
                <img src="assets/logo.png" alt="Logo" id="admin-logo-img">
                <h1 id="admin-instansi-nama">Dinas Perhubungan Kab.Semarang</h1>
            </div>
            <div class="date-time">
                <div id="admin-current-time"></div>
                <div id="admin-current-date"></div>
            </div>
        </header>

        <div class="admin-container">
            <div class="sidebar">
                <button class="sidebar-btn active" data-target="queue-management">Manajemen Antrian</button>
                <button class="sidebar-btn" data-target="system-settings">Pengaturan Sistem</button>
                <button class="sidebar-btn" data-target="history-data">Riwayat Antrian</button>
                <button id="logout-btn" class="logout-btn">Logout</button>
            </div>

            <div class="admin-content">
                <div id="queue-management" class="admin-section active">
                    <h2>Manajemen Antrian</h2>
                    <div class="queue-controls">
                        <div class="current-queue-display">
                            <h3>Antrian Saat Ini</h3>
                            <div class="admin-queue-number" id="admin-current-number">-</div>
                        </div>
                        <div class="queue-actions">
                            <button id="complete-queue-btn" class="success-btn">Antrian Selesai</button>
                            <button id="call-next-btn" class="primary-btn">Panggil Berikutnya</button>
                            <button id="cancel-queue-btn" class="danger-btn">Batalkan Antrian</button>
                            <button id="reset-queue-btn" class="danger-btn">Reset Antrian</button>
                        </div>
                        <div class="queue-note-section">
                            <h3>Catatan Antrian</h3>
                            <textarea id="queue-note-input" placeholder="Masukkan catatan untuk ditampilkan..."></textarea>
                            <button id="update-note-btn" class="primary-btn">Perbarui Catatan</button>
                        </div>
                    </div>
                    <div class="queue-status">
                        <h3>Status Antrian</h3>
                        <div class="status-grid">
                            <div class="status-item">
                                <span>Total Antrian:</span>
                                <span id="total-queue">0</span>
                            </div>
                            <div class="status-item">
                                <span>Antrian Tersisa:</span>
                                <span id="remaining-queue">0</span>
                            </div>
                            <div class="status-item">
                                <span>Antrian Terlewati:</span>
                                <span id="processed-queue">0</span>
                            </div>
                        </div>
                    </div>
                    <div class="queue-list-section">
                        <h3>Daftar Antrian</h3>
                        <div id="queue-list-display" class="queue-list-display">
                            <!-- Queue list will be populated here -->
                        </div>
                    </div>
                </div>

                <div id="system-settings" class="admin-section">
                    <h2>Pengaturan Sistem</h2>
                    <div class="settings-section">
                        <h3>Keamanan</h3>
                        <div class="input-group">
                            <label for="current-password">Password Saat Ini</label>
                            <input type="password" id="current-password" placeholder="Masukkan password saat ini">
                        </div>
                        <div class="input-group">
                            <label for="new-password">Password Baru</label>
                            <input type="password" id="new-password" placeholder="Masukkan password baru">
                        </div>
                        <div class="input-group">
                            <label for="confirm-password">Konfirmasi Password</label>
                            <input type="password" id="confirm-password" placeholder="Konfirmasi password baru">
                        </div>
                        <button id="change-password-btn" class="primary-btn">Ubah Password</button>
                        <div id="password-error" class="error-message"></div>
                        <div id="password-success" class="success-message"></div>
                    </div>
                </div>

                <div id="history-data" class="admin-section">
                    <h2>Riwayat Antrian</h2>
                    <div class="settings-section">
                        <h3>Riwayat Antrian</h3>
                        <div class="history-controls">
                            <div class="filter-group">
                                <label for="history-filter">Filter Jenis Angkutan:</label>
                                <select id="history-filter" class="filter-select">
                                    <option value="all">Semua</option>
                                    <option value="Angkutan Umum">Angkutan Umum</option>
                                    <option value="Angkutan Barang">Angkutan Barang</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label for="history-status-filter">Filter Status:</label>
                                <select id="history-status-filter" class="filter-select">
                                    <option value="all">Semua</option>
                                    <option value="Dipanggil">Dipanggil</option>
                                    <option value="Selesai">Selesai</option>
                                    <option value="Tidak Terselesaikan">Tidak Terselesaikan</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label for="history-date-filter">Filter Tanggal:</label>
                                <input type="date" id="history-date-filter" class="filter-select">
                            </div>
                            <button id="download-pdf-btn" class="primary-btn">Download PDF</button>
                            <button id="download-excel-btn" class="secondary-btn">Download Excel</button>
                        </div>
                        <table id="history-table" class="history-table">
                            <thead>
                                <tr>
                                    <th>No</th>
                                    <th>Nomor Antrian</th>
                                    <th>Jenis Angkutan</th>
                                    <th>Status</th>
                                    <th>Petugas</th>
                                    <th>Timestamp</th>
                                </tr>
                            </thead>
                            <tbody id="history-table-body">
                                <!-- History rows will be populated here -->
                            </tbody>
                        </table>
                        <p id="no-history" class="no-history">Belum ada riwayat antrian.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="petugas_script.js"></script>
</body>
</html>
